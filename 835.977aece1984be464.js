"use strict";(self.webpackChunkFresh_Cart=self.webpackChunkFresh_Cart||[]).push([[835],{7835:(q,o,a)=>{a.r(o),a.d(o,{CartModule:()=>I});var s=a(6814),l=a(6325),t=a(9468),d=a(9013),u=a(6992);function g(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){t.CHM(e);const c=t.oxw(2);return t.KtG(c.deleteAll())}),t._uU(1,"Delete All Items"),t.qZA()}}function p(r,i){if(1&r&&(t.TgZ(0,"div",4)(1,"div")(2,"h2"),t._uU(3,"Shopping Cart"),t.qZA()(),t.TgZ(4,"div"),t.YNc(5,g,2,0,"button",5),t.qZA()()),2&r){const e=t.oxw();t.xp6(5),t.Q6J("ngIf",e.cart.length>0)}}function _(r,i){1&r&&(t.TgZ(0,"span"),t._uU(1,"s"),t.qZA())}function m(r,i){if(1&r&&(t.TgZ(0,"p"),t._uU(1),t.YNc(2,_,2,0,"span",1),t._uU(3," in your cart"),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij("you have ",e.cart.length," item"),t.xp6(1),t.Q6J("ngIf",e.cart.length>1)}}function h(r,i){1&r&&(t.TgZ(0,"div",14),t._uU(1," You Have not Any Items In Your Cart "),t.qZA())}function C(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"tr")(1,"td",17)(2,"div"),t._UZ(3,"img",18),t.qZA()(),t.TgZ(4,"td",19),t._uU(5),t.qZA(),t.TgZ(6,"td",20),t._uU(7),t.qZA(),t.TgZ(8,"td",21)(9,"span",22),t._uU(10," 1 "),t.qZA()(),t.TgZ(11,"td",23),t._uU(12),t.qZA(),t.TgZ(13,"td")(14,"button",24),t.NdJ("click",function(){const S=t.CHM(e).$implicit,y=t.oxw(3);return t.KtG(y.delete(S.product._id))}),t._uU(15," Delete "),t.qZA()()()}if(2&r){const e=i.$implicit;t.xp6(3),t.s9C("src",e.product.imageCover,t.LSH),t.xp6(2),t.hij(" ",e.product.category.name," "),t.xp6(2),t.hij(" ",e.price," EGP "),t.xp6(5),t.hij(" ",e.price," EGP ")}}function f(r,i){if(1&r&&(t.TgZ(0,"table",15)(1,"thead")(2,"tr")(3,"td"),t._uU(4,"Product Image"),t.qZA(),t.TgZ(5,"td"),t._uU(6,"Name"),t.qZA(),t.TgZ(7,"td"),t._uU(8,"Price"),t.qZA(),t.TgZ(9,"td"),t._uU(10,"Quantity"),t.qZA(),t.TgZ(11,"td"),t._uU(12,"Total"),t.qZA(),t._UZ(13,"td"),t.qZA()(),t.TgZ(14,"tbody"),t.YNc(15,C,16,4,"tr",16),t.qZA()()),2&r){const e=t.oxw(2);t.xp6(15),t.Q6J("ngForOf",e.cart)}}function x(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"div"),t.YNc(1,h,2,0,"div",7),t.TgZ(2,"div",8),t.YNc(3,f,16,1,"table",9),t.TgZ(4,"div",10)(5,"div",11)(6,"div",12),t._uU(7),t.qZA(),t.TgZ(8,"button",13),t.NdJ("click",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.createOrder())}),t._uU(9," Create Order "),t.qZA()()()()()}if(2&r){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.emptyCart||0==e.cart.length),t.xp6(2),t.Q6J("ngIf",e.cart.length>0),t.xp6(4),t.hij(" total = ",e.total," EGP ")}}function v(r,i){if(1&r&&(t.TgZ(0,"div",25),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.orderStatus," ")}}let Z=(()=>{class r{constructor(e){this._CartService=e,this.cart=[],this.cartMessage="",this.emptyCart=!1,this.total=0}getUserCart(){this._CartService.getUserCartMain().subscribe({next:e=>{this.cart=e.data.products,this._CartService.AllItems=e.data.products,this._CartService.getAllCartLength(),this.getTotalOFAllProducts()}})}delete(e){this._CartService.deleteItemsFromCArtMain(e).subscribe({next:n=>{this.cartMessage=n.status,this.getUserCart(),this._CartService.updateCartCount(this.cart.length),this._CartService.items.next(0)}})}deleteAll(){this._CartService.deleteAllMain().subscribe({next:e=>{"success"==e.message&&(this.emptyCart=!0,this.cart.splice(0,this.cart.length),this.cartMessage=e.message,this._CartService.updateCartCount(0))}})}createOrder(){var e=localStorage.getItem("userId");e&&this._CartService.createOrderMain(e).subscribe({next:n=>{this.orderStatus="Order Created Successfuly!",this._CartService.items.next(0),this._CartService.updateCartCount(0)}})}getTotalOFAllProducts(){this.total=0;for(let e=0;e<this.cart.length;e++)this.total+=this.cart[e].price;console.log(`products ::::0${this.cart} .... total ::: ${this.total}`)}ngOnInit(){this.getUserCart(),localStorage.setItem("currentPage","/cart")}static#t=this.\u0275fac=function(n){return new(n||r)(t.Y36(d.N))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-user-cart"]],decls:7,vars:4,consts:[["class","d-flex justify-content-between align-items-center",4,"ngIf"],[4,"ngIf"],[1,"row"],["class","alert alert-success my-3 text-center",4,"ngIf"],[1,"d-flex","justify-content-between","align-items-center"],["class","btn btn-danger",3,"click",4,"ngIf"],[1,"btn","btn-danger",3,"click"],["class","col-12 alert alert-info text-center",4,"ngIf"],[1,"col-md-12"],["class","table  ",4,"ngIf"],[1,"d-flex","justify-content-end"],[1,"totalDiv","d-flex","justify-content-between","align-items-center","w-50"],[1,"fs-1"],[1,"btn","btn-success",3,"click"],[1,"col-12","alert","alert-info","text-center"],[1,"table"],[4,"ngFor","ngForOf"],[1,"image"],["alt","items Image",1,"imgBrdr",3,"src"],[1,"productName"],[1,"productPrice"],[1,"productQuantity"],[1,"d-block","w-25","text-center"],[1,"total"],[1,"btn","btn-danger","form-control",3,"click"],[1,"alert","alert-success","my-3","text-center"]],template:function(n,c){1&n&&(t._UZ(0,"app-loading"),t.YNc(1,p,6,1,"div",0),t.TgZ(2,"div"),t.YNc(3,m,4,2,"p",1),t.qZA(),t.TgZ(4,"div",2),t.YNc(5,x,10,3,"div",1),t.YNc(6,v,2,1,"div",3),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngIf",!c.orderStatus),t.xp6(2),t.Q6J("ngIf",!c.orderStatus),t.xp6(2),t.Q6J("ngIf",!c.orderStatus),t.xp6(1),t.Q6J("ngIf",c.orderStatus))},dependencies:[s.sg,s.O5,u.N],styles:[".imgBrdr[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:10px}@media (max-width:992px){.totalDiv[_ngcontent-%COMP%]{width:100%!important}}"]})}return r})();const U=[{path:"",redirectTo:"cart",pathMatch:"full"},{path:"cart",canActivate:[a(8005).a],component:Z}];let A=(()=>{class r{static#t=this.\u0275fac=function(n){return new(n||r)};static#e=this.\u0275mod=t.oAB({type:r});static#r=this.\u0275inj=t.cJS({imports:[l.Bz.forChild(U),l.Bz]})}return r})();var b=a(1832);let I=(()=>{class r{static#t=this.\u0275fac=function(n){return new(n||r)};static#e=this.\u0275mod=t.oAB({type:r});static#r=this.\u0275inj=t.cJS({imports:[s.ez,A,b.m]})}return r})()}}]);